# A imagem Docker que será usada para construir seu app
image: node:lts

# Funções que devem ser executadas antes do script de build
before_script:
  - npm ci

# Nome do stage
stages:
  - deploy

# Job para fazer o deploy
deploy:
  stage: deploy
  script:
    - echo "Deploying your static portfolio..."
    - cp -R * ./  # Copia todos os arquivos e diretórios para o diretório raiz
  only:
    - main  # Ou a branch que você quiser usar
  environment:
    name: production
    url: http://robinsonmourao.portifolio.com
  artifacts:
    paths:
      - .  # A pasta que o GitLab Pages vai servir, sem subpastas

# Configuração para GitLab Pages
pages:
  stage: deploy
  script:
    - echo "Deploying to GitLab Pages..."
    - cp -R * ./  # Copia todos os arquivos e diretórios para o diretório raiz
  artifacts:
    paths:
      - .  # A pasta que o GitLab Pages vai servir
  only:
    - main  # Ou a branch que você quiser usar
